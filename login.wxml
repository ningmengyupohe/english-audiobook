<!-- pages/login/login.wxml -->
<!-- 导航栏 -->
<view class="nav-bar">
  <view class="nav-back" bindtap="goBack">
    <text class="nav-icon">⬅️</text>
  </view>
  <text class="nav-title">用户登录</text>
  <view style="width: 60rpx"></view>
</view>

<view class="login-container">
  <!-- 欢迎标题 -->
  <view class="welcome-section">
    <text class="welcome-title">欢迎回来</text>
    <text class="welcome-subtitle">请输入账号密码登录系统</text>
  </view>

  <!-- 登录表单 -->
  <form bindsubmit="onLoginSubmit" class="login-form">
    <!-- 手机号输入 -->
    <view class="form-item">
      <view class="form-label-container">
        <text class="form-icon">📱</text>
        <text class="form-label">手机号</text>
      </view>
      <input 
        type="number" 
        name="phone" 
        value="{{formData.phone}}" 
        placeholder="请输入手机号" 
        maxlength="11"
        bindinput="onPhoneInput"
        class="form-input"
        placeholder-class="placeholder"
      />
    </view>

    <!-- 密码输入 -->
    <view class="form-item">
  <view class="form-label-container">
    <text class="form-icon">🔒</text>
    <text class="form-label">密码</text>
  </view>
  
  <!-- 密码输入框容器 -->
  <view class="password-container">
    <input 
      password="{{!passwordVisible}}"
      type="text"
      name="password" 
      value="{{formData.password}}"
      placeholder="请输入密码" 
      bindinput="onPasswordInput"
      class="form-input"
      placeholder-class="placeholder"
    />
    <!-- 眼睛图标 - 在输入框内部右侧 -->
    <view class="password-eye" bindtap="togglePasswordVisible">
      <text class="eye-icon">{{passwordVisible ? '👁️' : '👁️‍🗨️'}}</text>
    </view>
  </view>
  
  <!-- 记住密码和忘记密码 -->
  <view class="form-options">
    <view class="remember-checkbox" bindtap="toggleRemember">
      <text class="checkbox-icon">
        {{rememberPassword ? '✅' : '◻️'}}
      </text>
      <text class="checkbox-text">记住密码</text>
    </view>
    <view class="forgot-link" bindtap="goToForgotPassword">
      忘记密码?
    </view>
  </view>
    </view>

    <!-- 登录按钮 -->
    <button 
      type="submit" 
      form-type="submit" 
      class="login-btn {{canLogin ? 'active' : 'disabled'}}"
      disabled="{{!canLogin || isLogging}}"
      loading="{{isLogging}}"
     style="height: 122rpx; display: block; box-sizing: border-box; left: 0rpx; top: 0rpx">
      {{isLogging ? '登录中...' : '登录'}}
    </button>
  </form>

  <!-- 注册链接 -->
  <view class="register-section">
    <text class="register-text">还没有账号?</text>
    <text class="register-link" bindtap="goToRegister">立即注册</text>
  </view>

  <!-- 服务协议 -->
  <view class="agreement-section">
    <text class="agreement-text">登录即代表您已同意</text>
    <text class="agreement-link" bindtap="goToUserAgreement">《用户协议》</text>
    <text class="agreement-link" bindtap="goToPrivacyPolicy">《隐私政策》</text>
  </view>

  <!-- 底部装饰 -->
  <view class="bottom-decoration">
    <text class="decoration-text">📚 学习助手</text>
  </view>
</view>