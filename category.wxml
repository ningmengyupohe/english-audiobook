<view class="category-container">
  <!-- é¡¶éƒ¨èƒŒæ™¯ -->
  <view class="header-bg"></view>
  
  <!-- æœç´¢æ  -->
  <view class="search-section">
  <view class="search-container" bindtap="onSearchTap">
    <text class="search-icon">ğŸ”</text>
    <input 
      class="search-input" 
      placeholder="æœç´¢åˆ†ç±»æˆ–ä¹¦ç±..." 
      placeholder-class="search-placeholder"
      value="{{searchKeyword}}"
      bindinput="onSearchInput"
      bindconfirm="onSearchConfirm"
      confirm-type="search"
      disabled="{{true}}" 
    />
    <text class="search-clear" wx:if="{{searchKeyword}}" bindtap="clearSearch">âœ•</text>
    <view class="search-action" bindtap="onSearchButtonTap">
      <text class="search-button">æœç´¢</text>
    </view>
  </view>
  </view>
  
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{isLoading}}" class="loading-overlay">
    <view class="loading-content">
      <image class="loading-gif" src="/images/loading.gif"></image>
      <text class="loading-text">æ­£åœ¨åŠ è½½åˆ†ç±»æ•°æ®...</text>
    </view>
  </view>
  
  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:if="{{loadError && !isLoading}}" class="error-overlay">
    <view class="error-content">
      <text class="error-icon">ğŸ˜”</text>
      <text class="error-title">{{errorMessage || 'åŠ è½½å¤±è´¥'}}</text>
      <button class="retry-button" bindtap="retryLoad">é‡æ–°åŠ è½½</button>
    </view>
  </view>
  
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">ğŸ“š å…¨éƒ¨åˆ†ç±»</text>
    <text class="page-subtitle" wx:if="{{!showSearchResults}}">
      é€‰æ‹©æ„Ÿå…´è¶£çš„åˆ†ç±»å¼€å§‹å­¦ä¹ 
      <text wx:if="{{totalBookCount > 0}}" style="color: #FFC107; margin-left: 10rpx;">
        ğŸ“š {{totalBookCount}} æœ¬ä¹¦ç±
      </text>
    </text>
    <text class="page-subtitle" wx:if="{{showSearchResults}}">
      æ‰¾åˆ° {{categories.length}} ä¸ªç›¸å…³åˆ†ç±»
    </text>
  </view>
  
  <!-- æœç´¢æç¤º -->
  <view class="search-tips" wx:if="{{showSearchResults}}">
    <text class="search-tips-text">
      ğŸ” æœç´¢åˆ° {{searchResults.length}} ä¸ªç›¸å…³åˆ†ç±»
      <text class="clear-search" bindtap="clearSearch">æ¸…é™¤æœç´¢</text>
    </text>
  </view>
  
  <!-- æ¨èä¹¦ç± -->
  <view class="featured-section" wx:if="{{!showSearchResults && featuredBooks.length > 0}}">
    <view class="section-header">
      <text class="section-title">ğŸ”¥ æ¨èç²¾é€‰</text>
      <text class="section-more" bindtap="goToFeatured">æ›´å¤š</text>
    </view>
    <scroll-view class="featured-scroll" scroll-x="true">
      <view class="featured-list">
        <view class="featured-item" 
              wx:for="{{featuredBooks}}" 
              wx:key="id" 
              data-id="{{item.id}}" 
              bindtap="goToBookDetail"
              hover-class="featured-item-hover"
              hover-stay-time="100">
          <view class="featured-badge" style="background-color: {{item.categoryColor || theme.primary}}">
            {{item.category}}
          </view>
          <image src="{{item.cover}}" class="featured-cover" />
          <view class="featured-info">
            <text class="featured-title">{{item.title}}</text>
            <text class="featured-author">{{item.author}}</text>
            <view class="featured-rating">
              <text class="rating-star">â­</text>
              <text class="rating-score">{{item.rating}}</text>
            </view>
            <text class="featured-desc">{{item.description}}</text>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>
  
  <!-- åˆ†ç±»ç½‘æ ¼ -->
  <view class="categories-section">
    <view class="section-header" wx:if="{{!showSearchResults}}">
      <text class="section-title">ğŸ“ å…¨éƒ¨åˆ†ç±»</text>
      <text class="section-count">{{categories.length}} ä¸ªåˆ†ç±»</text>
    </view>
    
    <view class="empty-state" wx:if="{{categories.length === 0}}">
      <text class="empty-icon">{{useDefaultData ? 'ğŸ“±' : 'ğŸ”'}}</text>
      <text class="empty-text">{{useDefaultData ? 'ä½¿ç”¨æœ¬åœ°æ•°æ®' : 'æœªæ‰¾åˆ°ç›¸å…³åˆ†ç±»'}}</text>
      <text class="empty-desc">{{useDefaultData ? 'æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®' : 'æ¢ä¸ªå…³é”®è¯è¯•è¯•å§'}}</text>
      <button class="empty-button" bindtap="retryLoad" wx:if="{{!useDefaultData && !showSearchResults}}">
        é‡æ–°åŠ è½½
      </button>
    </view>
    
    <view class="categories-grid" wx:else>
      <view class="category-card" 
            wx:for="{{categories}}" 
            wx:key="id"
            data-id="{{item.id}}"
            bindtap="goToCategoryList"
            hover-class="category-card-hover"
            hover-stay-time="200"
            hover-start-time="50"
            bindtouchstart="onCardTouchStart"
            bindtouchend="onCardTouchEnd"
            data-index="{{index}}"
            animation="{{item.animationData}}">
        <!-- èƒŒæ™¯å›¾ç‰‡ -->
        <image class="category-bg" src="{{item.bgImage || '/images/categories/default-bg.jpg'}}" mode="aspectFill" />
        
        <!-- æ¸å˜é®ç½© -->
        <view class="category-overlay" style="background: {{item.gradient}}"></view>
        
        <!-- çƒ­é—¨/æ¨èè§’æ ‡ -->
        <view class="category-corner" wx:if="{{item.isHot || item.isRecommend}}">
          <text class="corner-text" wx:if="{{item.isHot}}">ğŸ”¥</text>
          <text class="corner-text" wx:if="{{item.isRecommend}}">â­</text>
        </view>
        
        <!-- å†…å®¹ -->
        <view class="category-content" style="height: 318rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
          <view class="category-icon">
            <text class="category-emoji">{{item.emoji || 'ğŸ“š'}}</text>
          </view>
          <view class="category-info">
            <text class="category-name">{{item.name}}</text>
            <text class="category-enname">{{item.enName}}</text>
            <view class="category-meta">
              <view class="meta-item" hover-class="meta-item-hover" hover-stay-time="100">
                <text class="meta-icon">ğŸ“š</text>
                <text class="meta-text">{{item.bookCount}} æœ¬</text>
              </view>
              <view class="meta-item" hover-class="meta-item-hover" hover-stay-time="100">
                <text class="meta-icon">ğŸ“Š</text>
                <text class="meta-text">{{item.difficulty}}</text>
              </view>
            </view>
          </view>
        </view>
        
        <!-- æ‚¬åœæç¤º -->
        <view class="hover-hint" wx:if="{{item.showHint === true}}">
          <text class="hover-text">ç‚¹å‡»è¿›å…¥åˆ†ç±»</text>
          <view class="hover-arrow">â†’</view>
        </view>
        
        <!-- æ‚¬æµ®åŠ¨æ•ˆ -->
        <view class="hover-effect" wx:if="{{item.isHovering === true}}"></view>
      </view>
    </view>
  </view>
  
  <!-- éšæœºæ¨èæŒ‰é’® -->
  <view class="random-section" wx:if="{{!showSearchResults && categories.length > 0}}">
    <view class="random-card" 
          bindtap="randomRecommend"
          hover-class="random-card-hover"
          hover-stay-time="100">
      <view class="random-icon">ğŸ²</view>
      <view class="random-info">
        <text class="random-title">éšæœºæ¨è</text>
        <text class="random-desc">ä¸çŸ¥é“å¬ä»€ä¹ˆï¼Ÿè¯•è¯•éšæœºæ¨è</text>
      </view>
      <view class="random-arrow">â†’</view>
    </view>
  </view>
  
  <!-- åº•éƒ¨æç¤º -->
  <view class="bottom-tips" wx:if="{{!showSearchResults}}">
    <text class="tips-text">æ‰¾ä¸åˆ°æƒ³è¦çš„å†…å®¹ï¼Ÿ</text>
    <text class="tips-action" 
          bindtap="goToSearch"
          hover-class="tips-action-hover"
          hover-stay-time="100">è¯•è¯•æœç´¢åŠŸèƒ½ â†’</text>
  </view>
</view>