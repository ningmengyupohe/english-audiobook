<!-- pages/my-books/my-books.wxml -->
<view class="my-books-container">
  <!-- å¯¼èˆªæ  -->
  <view class="nav-bar">
    <view class="nav-back" bindtap="goBack">
      <text class="nav-icon">â¬…ï¸</text>
    </view>
    <text class="nav-title">{{title}}</text>
    <view style="width: 60rpx"></view>
  </view>

  <!-- ç®€å•çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ ¹æ®é…ç½®æ˜¾ç¤ºï¼‰ -->
  <view class="simple-stats" wx:if="{{pageConfig.showStats && !isEmpty}}">
    <text class="stats-text">å…± {{bookList.length}} æœ¬ä¹¦</text>
  </view>

  <!-- ä¹¦ç±åˆ—è¡¨ -->
  <scroll-view 
    class="book-list" 
    scroll-y 
    enable-back-to-top="true"
    refresher-enabled="true"
    refresher-triggered="{{isLoading && bookList.length === 0}}"
    bindrefresherrefresh="onPullDownRefresh"
  >
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{isEmpty && !isLoading}}">
      <image src="/images/empty/books-empty.png" class="empty-img" />
      <text class="empty-text">æš‚æ— {{title}}</text>
    </view>

    <!-- ä¹¦ç±å¡ç‰‡åˆ—è¡¨ -->
    <view class="books-container" wx:if="{{!isEmpty}}">
      <block wx:for="{{bookList}}" wx:key="id">
        <view class="book-card" data-id="{{item.id}}" bindtap="goToBookDetail">
          <!-- ä¹¦ç±å°é¢ -->
          <view class="book-cover">
            <image src="{{item.cover}}" mode="aspectFill" class="cover-image"></image>
            <view class="cover-overlay">
              <text class="duration-text">{{item.duration}}åˆ†é’Ÿ</text>
              <view class="status-badge" wx:if="{{item.status}}">
                <text class="badge-text">{{item.status}}</text>
              </view>
            </view>
            <view class="difficulty-badge">{{item.level}}</view>
            
            <!-- è¿›åº¦æ¡ -->
            <view class="progress-bar" wx:if="{{item.progress > 0}}">
              <view class="progress-fill" style="width: {{item.progress}}'%'"></view>
            </view>
          </view>

          <!-- ä¹¦ç±ä¿¡æ¯ -->
          <view class="book-info">
            <view class="book-header">
              <text class="book-title">{{item.title}}</text>
            </view>
            
            <text class="book-author">ğŸ‘¤ {{item.author}}</text>
            
            <view class="book-meta">
              <text class="meta-item">ğŸ“– {{item.level}}</text>
              <text class="meta-item">â±ï¸ {{item.duration}}åˆ†é’Ÿ</text>
              <text class="meta-item" wx:if="{{item.chapterInfo}}">ğŸ“š {{item.chapterInfo}}</text>
            </view>
            
            <view class="book-description">
              <text class="description-text">{{item.description}}</text>
            </view>
            
            <view class="book-footer">
              <text class="last-read" wx:if="{{item.lastReadTime}}">
                ğŸ“… {{item.lastReadTime}}
              </text>
            </view>
          </view>
        </view>
      </block>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="load-more" wx:if="{{isLoading && bookList.length > 0}}">
      <view class="loading-spinner"></view>
      <text class="load-text">åŠ è½½ä¸­...</text>
    </view>
  </scroll-view>
</view>